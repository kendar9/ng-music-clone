<div class="playlist-container" *ngIf="playlist$ | async as playlist; else loading">
  <header class="playlist-header">
    <img [src]="playlist.coverUrl" alt="{{ playlist.name }} cover" class="playlist-cover">
    <div class="playlist-info">
      <span class="playlist-type">PLAYLIST</span>
      <h1 class="playlist-title">{{ playlist.name }}</h1>
      <p class="playlist-stats">{{ playlist.songs.length }} canciones</p>
    </div>
  </header>

  <div class="song-list">
    <div class="song-list-header">
      <span>#</span>
      <span>TÍTULO</span>
      <span>ÁLBUM</span>
      <span>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline></svg>
      </span>
    </div>

    <div class="song-item" *ngFor="let song of playlist.songs; let i = index">
      <div class="song-index-container">
        <span class="song-index">{{ i + 1 }}</span>
        <button class="play-button" (click)="playSong(song)">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="5 3 19 12 5 21 5 3"></polygon></svg>
        </button>
      </div>
      <div class="song-title-artist">
        <img [src]="song.coverUrl" alt="{{ song.album }} cover" class="song-cover">
        <div>
          <p class="song-title">{{ song.title }}</p>
          <p class="song-artist">{{ song.artist.name }}</p>
        </div>
      </div>
      <span class="song-album">{{ song.album }}</span>
      <span class="song-duration">{{ formatDuration(song.duration) }}</span>
    </div>
  </div>
</div>

<ng-template #loading>
  <p>Cargando playlist...</p>
</ng-template>